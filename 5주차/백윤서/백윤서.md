# 5주차 React 스터디 정리

| 장   | 제목                                 |
| ---- | ------------------------------------ |
| 13장 | 리액트 라우터로 SPA 개발하기         |
| 14장 | 외부 API를 연동하여 뉴스 뷰어 만들기 |

## 13장

### 13.1 SPA란?

SPA란 Single Page Application으로 서버에서 사용자에게 제공하는 페이지는 한 종류이지만, 해당 페이지에서 로딩된 자바스크립트와 현재 사용자 브라우저의 주소 상태에 따라 다양한 화면을 보여줄 수 있는 애플리케이션이다.

### 13.2 프로젝트 준비 및 기본적인 사용법

`yarn add react-router-dom`을 통해 리액트 라우터를 설치한다.

```javascript
import React from "react";
import { BrowserRouter } from "react-router-dom";
import ...

ReactDOM.render(
  <BrowserRouter>
    <App />
  </BrowserRouter>,
  document.getElementById("root")
);
```

후에 index.js 파일에 다음과 같이 `BrowserRouter` 컴포넌트를 추가해준다.

**1. Route 컴포넌트로 특정 주소에 컴포넌트 연결**

`Route`라는 컴포넌트를 사용하여 사용자의 현재 경로에 따라 다른 컴포넌트를 보여줄 수 있다.

```javascript
<Route path="주소 규칙" component={보여 줄 컴포넌트} />
```

보통 첫 페이지 같은 경우에는 주소 규칙이 `path="/"`인 경우가 대부분일 것이다. 그리고 나머지 페이지는 `path="/page"`인 식일 것이다. 위에 `Route` 컴포넌트 사용 방식대로 입력하면 아마 규칙에 `/`가 다 포함되기 때문에 주소 규칙이 `path="/"`인 컴포넌트는 모든 페이지에 나타날 것이다. 이런 경우에 주소 규칙이 `path="/"`인 페이지를 위하여 `exact={true}`를 추가해주면 컴포넌트가 하나만 잘 나타난다.

**2. Link 컴포넌트를 사용하여 다른 주소로 이동하기**

`Link` 컴포넌트를 이용하여 페이지를 전환하면, 페이지를 새로 불러오지 않고 애플리케이션은 그대로 유지한 상태에서 페이지의 주소만 변경해준다. `Link` 컴포넌트 자체는 a 태그로 이루어져 있지만, 페이지 전환을 방지하는 기능이 내장되어 있다.

```javascript
<Link to="Route에 사용한 path(주소)">내용</Link>
```

예시로 Home과 About 컴포넌트를 각각 만든 후 App 컴포넌트에서 경로를 이동하는 것까지 적용했을 때다.

```javascript
import React from "react";
import { Link, Route } from "react-router-dom";
import Home from "./Home";
import About from "./About";

function App() {
  return (
    <div>
      <ul>
        <li>
          <Link to="/">Home</Link>
        </li>
        <li>
          <Link to="/about">About</Link>
        </li>
      </ul>
      <hr />
      <Route path="/" component={Home} exact={true} />
      <Route path="/about" component={About} />
    </div>
  );
}

export default App;
```

### 13.3 Route 하나에 여러 개의 path 설정하기

`path props`를 배열로 설정해주면 여러 경로에서 같은 컴포넌트를 보여줄 수 있다.

```javascript
<Route path={["주소1", "주소2"]} component={컴포넌트} />
```

### 13.4 URL 파라미터와 쿼리

페이지 주소를 정의할 때 유동적인 값을 전달해야할 때가 있다. 이는 파라미터와 쿼리로 나눌 수 있다.

- **파라미터**
  - 예시 : /profile/**velopart**
  - 주로 특정 아이디 혹은 이름을 사용하여 조회할 때 사용
- **쿼리**
  - 예시 : /about?**details=true**
  - 주로 어떤 키워드를 검색하거나 페이지에 필요한 옵션을 전달할 때 사용

**1. URL 파라미터**

```javascript
import React from "react";

const data = {
  bgyoons: {
    name: "백윤서",
    description: "리액트를 좋아하는 개발자",
  },
  ...
};

const Profile = ({ match }) => {
  const { username } = match.params;
  const profile = data[username];

  return (
    <div>
      <h3>
        {username}({profile.name})
      </h3>
      <p>{profile.description}</p>
    </div>
  );
};

export default Profile;
```

URL 파라미터를 사용할 때는 라우트로 사용되는 컴포넌트에서 받아 오는 `match`라는 객체 안의 `params` 값을 참조한다. `match` 객체 안에는 현재 컴포넌트가 어떤 경로 규칙에 의해 보이는지에 대한 정보가 들어있다.

```javascript
...

function App() {
  return (
    <div>
      <ul>
        ...
        <li>
          <Link to="/profile/bgyoons">bgyoons Profile</Link>
        </li>
        <li>
          <Link to="/profile/ran">ran Profile</Link>
        </li>
      </ul>
      ...
      <Route path="/profile/:username" component={Profile} exact={true} />
    </div>
  );
}

export default App;
```

Profile 컴포넌트를 위한 라우트를 App 컴포넌트에서 정의해준다. `path` 규칙은 `path="/profile/:username"`을 통해 현재 `username` 값을 조회할 수 있다.

**2. URL 쿼리**

쿼리는 `location` 객체에 들어있는 `search` 값에서 조회할 수 있다. `location` 객체는 라우트로 사용된 컴포넌트에게 `props`로 전달되며, 웹 애플리케이션의 현재 주소에 대한 정보를 지니고 있다.

```
{
  "pathname": "/about",
  "search": "?detail=true",
  "hash": ""
}
```

위 `location` 객체는 `http://localhost:3000/about?detail=true` 주소로 들어갔을 때의 값이다.

URL 쿼리를 읽을 때는 위 객체 값 중에서 `search` 값을 확인해야 한다.

`search` 값에서 특정 값을 읽어오기 위해서는 이 문자열을 객체 형태로 변환해주어야 한다. 쿼리 문자열을 객체로 변환할 때는 `qs 라이브러리`를 사용한다. `yarn add qs`을 통해 설치한다.

```javascript
import React from "react";
import qs from "qs";

const About = ({ location }) => {
  const query = qs.parse(location.search, {
    ignoreQueryPrefix: true,
    // 이 설정을 하면 문자열 맨 앞의 ?를 생략한다.
  });
  const showDetail = query.detail === "true";

  return (
    <div>
      <h1>About</h1>
      <p>React Router Example</p>
      {showDetail && <p>detail value true!</p>}
    </div>
  );
};

export default About;
```

쿼리를 사용할 때는 쿼리 문자열을 객체로 파싱하는 과정에서 결과 값은 언제나 **문자열**이라는 점에 주의해야 한다. 때문에 숫자를 받아와야 하면 `parseInt` 함수를 통해 숫자로 변환해주고 논리 자료형 같은 경우는 문자열이랑 정확히 일치하는지 확인해야 한다.

`http://localhost:3000/about?detail=true` 주소로 들어가보면 위의 `{showDetail && <p>detail value true!</p>}` 코드 부분을 볼 수 있다.

### 13.5 서브 라우트

내용 placeholder

### 13.6 리액트 라우터 부가 기능

내용 placeholder

### 13.7 정리

내용 placeholder

## 14장

### 14.1 비동기 작업의 이해

내용 placeholder

### 14.2 axios로 API 호출해서 데이터 받아 오기

내용 placeholder

### 14.3 newsapi API 키 발급받기

내용 placeholder

### 14.4 뉴스 뷰어 UI 만들기

내용 placeholder
