# 3ì£¼ì°¨ React ìŠ¤í„°ë”” ì •ë¦¬

| ì¥  | ì œëª©                           |
| --- | ------------------------------ |
| 6ì¥ | ì»´í¬ë„ŒíŠ¸ ë°˜ë³µ                  |
| 7ì¥ | ì»´í¬ë„ŒíŠ¸ì™€ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ |
| 8ì¥ | Hooks                          |

## 6ì¥

### 6.1 ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°°ì—´ì˜ map() í•¨ìˆ˜

`map()` ì€ ë°°ì—´ ë‚´ì˜ ëª¨ë“  ìš”ì†Œ ê°ê°ì— ëŒ€í•˜ì—¬ ì£¼ì–´ì§„ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²°ê³¼ë¥¼ ëª¨ì•„ ìƒˆë¡œìš´ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```javascript
const array = [1, 2, 3, 4];
const map = array.map((x) => x * 2);

console.log(map); //Array [2, 4, 6, 8]
```

[MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

### 6.2 ë°ì´í„° ë°°ì—´ì„ ì»´í¬ë„ŒíŠ¸ ë°°ì—´ë¡œ ë³€í™˜í•˜ê¸°

`map()` ì„ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì‚¬ìš©í•´ë³´ë©´ ì´ë ‡ìŠµë‹ˆë‹¤.

```javascript
import React from "react";

const MapMethod = () => {
  const names = ["ëˆˆì‚¬ëŒ", "ì–¼ìŒ", "ëˆˆ", "ë°”ëŒ"];
  const nameList = names.map((name) => <li>{name}</li>);
  return <ul>{nameList}</ul>;
};

export default MapMethod;
```

ë Œë”ë§ ê²°ê³¼ëŠ” ì´ë ‡ìŠµë‹ˆë‹¤.
<img src="https://user-images.githubusercontent.com/89551626/135824637-ca0bb3e7-f6cf-4bb2-8a8e-c07800cab2ac.png">

í•˜ì§€ë§Œ ì½˜ì†”ì°½ì„ ì¼œë³´ë©´ ì´ëŸ° ê²½ê³ ë©”ì‹œì§€ê°€ ë–  ìˆê²Œ ë©ë‹ˆë‹¤.
<img src="https://user-images.githubusercontent.com/89551626/135824831-10161de4-ac28-4cc2-8b0a-025f3ddfdbc7.png">

### 6.3 key

ë¦¬ì•¡íŠ¸ì—ì„œ `key` ëŠ” ì»´í¬ë„ŒíŠ¸ ë°°ì—´ì„ ë Œë”ë§í–ˆì„ ë•Œ ì–´ë–¤ ì›ì†Œì— ë³€ë™ì´ ìˆì—ˆëŠ”ì§€ ì•Œì•„ë‚´ë ¤ê³  ì‚¬ìš©í•©ë‹ˆë‹¤.  
`key` ê°€ ìˆìŒìœ¼ë¡œ ì¸í•´ `Virtual DOM` ì„ ë¹„êµí•˜ëŠ” ê³¼ì •ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë¹„êµí•˜ë©´ì„œ ë³€í™”ë¥¼ ë”ìš± ë¹ ë¥´ê²Œ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
`key` ê°’ì€ `props` ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ ë˜ë©° í•­ìƒ ìœ ì¼í•œ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.  
ìœ„ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ë©´

```javascript
import React from "react";

const MapMethod = () => {
  const names = ["ëˆˆì‚¬ëŒ", "ì–¼ìŒ", "ëˆˆ", "ë°”ëŒ"];
  const nameList = names.map((name, index) => <li key={index}>{name}</li>);
  return <ul>{nameList}</ul>;
};

export default MapMethod;
```

ì´ì œ ê²½ê³ ë©”ì‹œì§€ê°€ ì‚¬ë¼ì¡ŒìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
í•˜ì§€ë§Œ `index` ê°’ì€ ìœ ë™ì ì¸ ë°°ì—´ì¼ ë•Œ ìœ ì¼í•œ ê°’ì´ ì•„ë‹ˆë¼ ê³„ì†í•´ì„œ ë³€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì´ì§€ ëª»í•©ë‹ˆë‹¤.

### 6.4 ì‘ìš©

ìœ„ë¥¼ ì‘ìš©í•˜ì—¬ ë™ì ì¸ ë°°ì—´ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useState } from "react";

const MapMethod = () => {
  const [names, setNames] = useState([
    { id: 1, text: "ëˆˆì‚¬ëŒ" },
    { id: 2, text: "ì–¼ìŒ" },
    { id: 3, text: "ëˆˆ" },
    { id: 4, text: "ë°”ëŒ" },
  ]);
  const [inputText, setInputText] = useState("");
  const [nextId, setNextId] = useState(5); // ìƒˆë¡œìš´ í•­ëª©ì„ ì¶”ê°€í•  ë•Œ ì‚¬ìš©í•  id

  const nameList = names.map((name) => <li key={name.id}>{name.text}</li>);
  return <ul>{nameList}</ul>;
};

export default MapMethod;
```

`key` ê°’ì„ `index` ëŒ€ì‹  `name.id` ê°’ìœ¼ë¡œ ì§€ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.  
ì´ì œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

**â• ë°ì´í„° ì¶”ê°€ ê¸°ëŠ¥ â•**

```javascript
import React, { useState } from "react";

const MapMethod = () => {
  const [names, setNames] = useState([
    { id: 1, text: "ëˆˆì‚¬ëŒ" },
    { id: 2, text: "ì–¼ìŒ" },
    { id: 3, text: "ëˆˆ" },
    { id: 4, text: "ë°”ëŒ" },
  ]);
  const [inputText, setInputText] = useState("");
  const [nextId, setNextId] = useState(5); // ìƒˆë¡œìš´ í•­ëª©ì„ ì¶”ê°€í•  ë•Œ ì‚¬ìš©í•  id

  const onChange = (event) => setInputText(event.target.value);
  const onClick = () => {
    const nextNames = names.concat({
      id: nextId,
      text: inputText,
    });
    setNextId(nextId + 1);
    setNames(nextNames);
    setInputText("");
  };

  const nameList = names.map((name) => <li key={name.id}>{name.text}</li>);
  return (
    <>
      <input value={inputText} onChange={onChange} />
      <button onClick={onClick}>ì¶”ê°€</button>
      <ul>{nameList}</ul>
    </>
  );
};

export default MapMethod;
```

ì—¬ê¸°ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë©”ì†Œë“œ `concat()` ì´ ì‚¬ìš©ë˜ì—ˆëŠ”ë°ìš”,
`concat()` ì€ ì¸ìë¡œ ì£¼ì–´ì§„ ë°°ì—´ì´ë‚˜ ê°’ë“¤ì„ ê¸°ì¡´ ë°°ì—´ì— í•©ì³ì„œ ìƒˆ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```javascript
const array1 = ["a", "b", "c"];
const array2 = ["d", "e", "f"];
const array3 = array1.concat(array2);

console.log(array3); // Array ["a", "b", "c", "d", "e", "f"]
```

`push()` ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” `push()` ëŠ” ê¸°ì¡´ ë°°ì—´ ìì²´ë¥¼ ë³€ê²½í•´ì£¼ì–´ ë¦¬ì•¡íŠ¸ì˜ ë¶ˆë³€ì„±ì„ ê¹¨ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ `concat()` ì€ ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“¤ì–´ì£¼ê¸° ë•Œë¬¸ì— ì¶”í›„ ì»´í¬ë„ŒíŠ¸ ì„±ëŠ¥ ìµœì í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
[MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)

ì´ì œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.  
ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ë°°ì—´ì˜ íŠ¹ì • í•­ëª©ì„ ì§€ìš¸ ë•ŒëŠ” `filter()` ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
const numbers = [1, 2, 3, 4, 5, 6];
const biggerThanThree = numbers.filter((number) => number > 3);
const withoutThree = numbers.filter((number) => number !== 3);

console.log(biggerThanThree); // Array [4, 5, 6]
console.log(withoutThree); // Array [1, 2, 4, 5, 6]
```

ì´ë ‡ê²Œ `filter()` ë¥¼ ì‚¬ìš©í•˜ë©´ ë°°ì—´ì—ì„œ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì›ì†Œë“¤ë§Œ ì‰½ê²Œ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
[MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)

**ğŸ—‘ï¸ ë°ì´í„° ì‚­ì œ ê¸°ëŠ¥ ğŸ—‘ï¸**

```javascript
import React, { useState } from "react";

const MapMethod = () => {
  const [names, setNames] = useState([
    { id: 1, text: "ëˆˆì‚¬ëŒ" },
    { id: 2, text: "ì–¼ìŒ" },
    { id: 3, text: "ëˆˆ" },
    { id: 4, text: "ë°”ëŒ" },
  ]);
  const [inputText, setInputText] = useState("");
  const [nextId, setNextId] = useState(5); // ìƒˆë¡œìš´ í•­ëª©ì„ ì¶”ê°€í•  ë•Œ ì‚¬ìš©í•  id

  const onChange = (event) => setInputText(event.target.value);
  const onClick = () => {
    const nextNames = names.concat({
      id: nextId,
      text: inputText,
    });
    setNextId(nextId + 1);
    setNames(nextNames);
    setInputText("");
  };
  const onRemove = (id) => {
    const nextNames = names.filter((name) => name.id !== id);
    setNames(nextNames);
  };

  const nameList = names.map((name) => (
    <li key={name.id}>
      {name.text}
      <button onClick={() => onRemove(name.id)}>ì‚­ì œ</button>
    </li>
  ));
  return (
    <>
      <input value={inputText} onChange={onChange} />
      <button onClick={onClick}>ì¶”ê°€</button>
      <ul>{nameList}</ul>
    </>
  );
};

export default MapMethod;
```

### 6.5 ì •ë¦¬

- ì»´í¬ë„ŒíŠ¸ ë°°ì—´ì„ ë Œë”ë§í•  ë•ŒëŠ” ìœ ì¼í•´ì•¼í•˜ëŠ” `key` ê°’ì— ì£¼ì˜í•˜ì.
- ë°°ì—´ì„ ë³€ê²½í•  ë•ŒëŠ” ì§ì ‘ ìˆ˜ì • âŒ, `concat()`, `filter()` ê³¼ ê°™ì€ ë°°ì—´ ë‚´ì¥ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“  í›„ ì´ë¥¼ ìƒˆë¡œìš´ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ì‹œì¼œì£¼ì.

## 7ì¥

### 7.1 ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œì˜ ì´í•´

ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” LifeCycle (ìƒëª…ì£¼ê¸°) ê°€ ì¡´ì¬í•˜ëŠ”ë°ìš”,  
ì»´í¬ë„ŒíŠ¸ì˜ ìˆ˜ëª…ì€ í˜ì´ì§€ê°€ ë Œë”ë§ë˜ê¸° ì „ì¸ ì¤€ë¹„ ê³¼ì •ì—ì„œ ì‹œì‘í•˜ì—¬ í˜ì´ì§€ì—ì„œ ì‚¬ë¼ì§ˆ ë•Œ ëë‚˜ê²Œ ë©ë‹ˆë‹¤.  
LifeCycle ë©”ì†Œë“œëŠ” í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•˜ë©° í•¨ìˆ˜ì—ì„  Hooks ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ìŠ·í•˜ê²Œ ì‚¬ìš©ê°€ëŠ¥ í•©ë‹ˆë‹¤.

LifeCycle ë©”ì†Œë“œëŠ” ì´ 9ê°€ì§€ ì´ë©° ì ‘ë‘ì‚¬ë¡œ ë‚˜ëˆ„ìë©´,

- **Will ~** = ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•˜ê¸° **ì „**ì— ì‹¤í–‰
- **Did ~** = ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•œ **í›„**ì— ì‹¤í–‰

ê¸°ëŠ¥ì— ë”°ë¼,

- **mount**: í˜ì´ì§€ì— ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¨
- **update**: ì»´í¬ë„ŒíŠ¸ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸
- **unmount**: í˜ì´ì§€ì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§
  ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤.

### 7.2 ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì‚´í´ë³´ê¸°

#### ë§ˆìš´íŠ¸

DOM ì´ ìƒì„±ë˜ê³  ì›¹ ë¸Œë¼ìš°ì € ìƒì— ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ mount ë¼ê³  í•©ë‹ˆë‹¤.  
ì´ ë•Œ í˜¸ì¶œí•˜ëŠ” ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **constructor**
   : ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í´ë˜ìŠ¤ ìƒì„±ì ë©”ì†Œë“œë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë§Œë“¤ì–´ì§€ë©´ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤.

   ```javascript
   constructor(props) {
       super(props);
       console.log("constructor");
   }
   ```

2. **getDerivedStateFromProps**
   : props ì— ìˆëŠ” ê°’ì„ state ì— ë„£ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ

   ```javascript
   static getDerivedStateFromProps(nextProps, prevState) {
       if(nextProps.value !== prevState.value) {    // ì¡°ê±´ì— ë”°ë¼ íŠ¹ì •ê°’ ë™ê¸°í™”
           return {value : nextProps.value};
       }
       return null;  // state ë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ null ë°˜í™˜
   }
   ```

3. **render**
   : ì¤€ë¹„í•œ UI ë¥¼ ë Œë”ë§í•˜ëŠ” ë©”ì†Œë“œë¡œ ë‚´ë¶€ì—ì„œ `this.props` ì™€ `this.state` ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©° ë¦¬ì•¡íŠ¸ ìš”ì†Œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.  
   ì´ë²¤íŠ¸ ì„¤ì •ì´ ì•„ë‹Œ ê³³ì—ì„œ `setState` ë¥¼ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë˜ë©° DOM ì— ì ‘ê·¼í•´ë„ ì•ˆë©ë‹ˆë‹¤.  
   DOM ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ state ì— ë³€í™”ë¥¼ ì¤„ ë•ŒëŠ” `componentDidMount` ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

4. **componentDidMount**
   : ì»´í¬ë„ŒíŠ¸ê°€ ë¸Œë¼ìš°ì € ìƒì— ë‚˜íƒ€ë‚œ í›„ í˜¸ì¶œí•˜ëŠ” ë©”ì†Œë“œë¡œ ë‚´ë¶€ì—ì„œ ë‹¤ë¥¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” í”„ë ˆì„ì›Œí¬ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ì´ë²¤íŠ¸ ë“±ë¡, `setTimeout`, `setInterval`, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ê°™ì€ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.

#### ì—…ë°ì´íŠ¸

â­ì»´í¬ë„ŒíŠ¸ëŠ” ì•„ë˜ì˜ ì´ 4ê°€ì§€ ê²½ìš°ì— ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.â­

1. **props ê°€ ë°”ë€” ë•Œ**
2. **state ê°€ ë°”ë€” ë•Œ**
3. **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œ**
4. this.forceUpdateë¡œ ê°•ì œë¡œ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ë•Œ

ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë˜ëŠ” ì‹œì ì— í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **shouldComponentUpdate**
   : `props` ë˜ëŠ” `state` ì„ ë³€ê²½í–ˆì„ ë•Œ ë¦¬ë Œë”ë§ì„ ì‹œì‘í• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •í•˜ëŠ” ë©”ì†Œë“œë¡œ ë°˜ë“œì‹œ `true` ë˜ëŠ” `false` ê°’ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.  
   ë”°ë¡œ ìƒì„±í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ `true` ê°’ì„ ë°˜í™˜í•˜ë©° `false` ê°’ì„ ë°˜í™˜í•  ê²½ìš° ì—…ë°ì´íŠ¸ ê³¼ì •ì€ ì¤‘ì§€ë©ë‹ˆë‹¤.  
   `props` ì™€ `state` ëŠ” `this.props` ì™€ `this.state` ë¡œ ì ‘ê·¼í•˜ê³  ìƒˆë¡œ ì„¤ì • ë  `props` ë˜ëŠ” `state` ëŠ” `nextProps` ì™€ `nextState` ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
   ì´ ë©”ì†Œë“œëŠ” ì£¼ë¡œ ì»´í¬ë„ŒíŠ¸ ìµœì í™”ì— ì“°ì…ë‹ˆë‹¤.

```javascript
shouldComponentUpdate(nextProps, nextState) {
    console.log("shouldComponentUpdate", nextProps, nextState);
    // ìˆ«ìì˜ ë§ˆì§€ë§‰ ìë¦¬ê°€ 4ë©´ ë¦¬ë Œë”ë§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
    return nextState.number % 10 !== 4;
}
```

2. **getSnapshotBeforeUpdate**
   : `render` ì—ì„œ ë§Œë“¤ì–´ì§„ ê²°ê³¼ë¬¼ì´ ë¸Œë¼ìš°ì €ì— ì‹¤ì œë¡œ ë°˜ì˜ë˜ê¸° ì§ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.  
   `componentDidUpdate` ì—ì„œ ì„¸ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì¸ `snapshot` ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” ê°’ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
   ì£¼ë¡œ ë³€í™”ê°€ ì¼ì–´ë‚˜ê¸° ì§ì „ì˜ DOM ìƒíƒœë¥¼ ê°€ì ¸ì™€ì•¼ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤(ex. ìŠ¤í¬ë¡¤ë°” ìœ„ì¹˜ ìœ ì§€).

   ```javascript
   getSnapshotBeforeUpdate(prevProps, prevState) {
       if(prevState.array !== this.state.array) {
           const { scrollTop, scrollHeight } = this.list;
           return { scrollTop, scrollHeight };
       }
   }
   ```

3. **componentDidUpdate**
   : ë¦¬ë Œë”ë§ì„ ì™„ë£Œí•œ í›„, í™”ë©´ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë³€í™”ê°€ ëª¨ë‘ ë°˜ì˜ë˜ê³  ë‚˜ì„œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ ì…ë‹ˆë‹¤.  
   ì—…ë°ì´íŠ¸ê°€ ëë‚œ ì§í›„ì´ë¯€ë¡œ DOM ê´€ë ¨ ì²˜ë¦¬ë¥¼ í•´ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.  
   `prevProps` ë˜ëŠ” `prevState` ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì´ì „ì— ê°€ì¡Œë˜ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ `getSnapshotBeforeUpdate` ì—ì„œ ë°˜í™˜í•œ ê°’ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ `snapshot` ê°’ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   ```javascript
   componentDidUpdate(prevProps, prevState, snapshot) {
       console.log("componentDidUpdate", prevProps, prevState);
       if (snapshot) {
           console.log("ì—…ë°ì´íŠ¸ ë˜ê¸° ì§ì „ ìƒ‰ìƒ: ", snapshot);
       }
   }
   ```

#### ì–¸ë§ˆìš´íŠ¸

ì»´í¬ë„ŒíŠ¸ë¥¼ DOM ì—ì„œ ì œê±°í•˜ëŠ” ê²ƒì„ unmount ë¼ê³  í•©ë‹ˆë‹¤.

1. **componentWillUnmount**
   : ì»´í¬ë„ŒíŠ¸ê°€ ë¸Œë¼ìš°ì € ìƒì—ì„œ ì‚¬ë¼ì§€ê¸° ì „ì— í˜¸ì¶œí•˜ëŠ” ë©”ì†Œë“œ.
   `componentDidMount` ì—ì„œ ë“±ë¡í•œ ì´ë²¤íŠ¸, íƒ€ì´ë¨¸, ì§ì ‘ ìƒì„±í•œ DOM ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ì œê±° ì‘ì—…ì„ í•´ì•¼í•©ë‹ˆë‹¤.

#### ê¸°íƒ€

1. **componentDidCatch**
   : ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë„ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¨¹í†µì´ ë˜ì§€ ì•Šê³  ì˜¤ë¥˜ UI ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
   ```javascript
   componentDidCatch(error, info) {
       this.setState({
           error: true
       });
       console.log({ error, info });
   }
   ```

ì—¬ê¸°ì„œ `error` ëŠ” íŒŒë¼ë¯¸í„°ì— ì–´ë˜ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ ì•Œë ¤ì£¼ë©°, `info` íŒŒë¼ë¯¸í„°ëŠ” ì–´ë””ì— ìˆëŠ” ì½”ë“œì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¤ë‹ˆë‹¤.  
ì•„ë˜ì˜ ì˜ˆì œë“¤ì„ ë³´ë©° ìƒì„¸í•œ ì½”ë“œë¥¼ ì§œë³´ê² ìŠµë‹ˆë‹¤.

### 7.3 ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ ì‚¬ìš©í•˜ê¸°

ì•„ë˜ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ê° ë¼ì´í”„ì‚¬ì´í´ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•  ë•Œ ë§ˆë‹¤ ì½˜ì†”ì— ê¸°ë¡í•˜ê³   
ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ `props` ë¡œ ìƒ‰ìƒì„ ë°›ì•„ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `state.number` ê°’ì„ +1 í•©ë‹ˆë‹¤.

- `getDerivedStateFromProps` ëŠ” ë¶€ëª¨ì—ê²Œì„œ ë°›ì€ `color` ê°’ì„ `state` ì— ë™ê¸°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- `getSnapshotBeforeUpdate` ëŠ” DOMì— ë³€í™”ê°€ ì¼ì–´ë‚˜ê¸° ì§ì „ì˜ ìƒ‰ìƒ ì†ì„±ì„ `snapshot` ê°’ìœ¼ë¡œ ë°˜í™˜í•˜ì—¬ ì´ë¥¼ `componentDidUpdate` ì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆê²Œ í–ˆìŠµë‹ˆë‹¤.
- `shouldComponentUpdate` ì—ì„œ `state.number` ê°’ì˜ ë§ˆì§€ë§‰ ìë¦¬ ìˆ˜ê°€ 4ì¼ ë–„ ë¦¬ë Œë”ë§ì„ ì·¨ì†Œí•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```javascript
// LifeCycleSample.jsx

import React, { Component } from "react";

class LifeCycleSample extends Component {
  state = {
    number: 0,
    color: null,
  };

  myRef = null; // refë¥¼ ì„¤ì •í•  ë¶€ë¶„

  constructor(props) {
    super(props);
    console.log("í˜¸ì¶œ - constructor");
  }

  static getDerivedStateFromProps(nextProps, prevState) {
    console.log("í˜¸ì¶œ - getDerivedStateFromProps");
    if (nextProps.color !== prevState.color) {
      return { color: nextProps.color };
    }
    return null;
  }

  componentDidMount() {
    console.log("í˜¸ì¶œ - componentDidMount");
  }

  shouldComponentUpdate(nextProps, nextState) {
    console.log("í˜¸ì¶œ - shouldComponentUpdate", nextProps, nextState);
    // ìˆ«ìì˜ ë§ˆì§€ë§‰ ìë¦¬ê°€ 4ë©´ ë¦¬ë Œë”ë§ X
    return nextState.number % 10 !== 4;
  }

  componentWillUnmount() {
    console.log("í˜¸ì¶œ - componentWillUnmonunt");
  }

  handleClick = () => {
    this.setState({
      number: this.state.number + 1,
    });
  };

  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("í˜¸ì¶œ - getSnapshotBeforeUpdate");
    if (prevProps.color !== this.props.color) {
      return this.myRef.style.color;
    }
    return null;
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log("í˜¸ì¶œ - componentDidUpdate", prevProps, prevState);
    if (snapshot) {
      console.log("ì—…ë°ì´íŠ¸ë˜ê¸° ì§ì „ ìƒ‰ìƒ: ", snapshot);
    }
  }

  render() {
    console.log("í˜¸ì¶œ - render");

    const style = {
      color: this.props.color,
    };

    return (
      <div>
        <h1 style={style} ref={(ref) => (this.myRef = ref)}>
          {this.state.number}
        </h1>
        <p>color: {this.state.color}</p>
        <button onClick={this.handleClick}>ë”í•˜ê¸°</button>
      </div>
    );
  }
}

export default LifeCycleSample;
```

```javascript
// App.jsx

import React, { Component } from "react";
import LifeCycleSample from "./components/LifeCycleSample";

const getRandomColor = () => {
  return "#" + Math.floor(Math.random() * 16777215).toString(16);
};

class App extends Component {
  state = {
    color: "#000000",
  };

  handleClick = () => {
    this.setState({
      color: getRandomColor(),
    });
  };
  render() {
    return (
      <div>
        <button onClick={this.handleClick}>ëœë¤ ìƒ‰ìƒ</button>
        <LifeCycleSample color={this.state.color} />
      </div>
    );
  }
}

export default App;
```

ê²°ê³¼ëŠ” ì´ë ‡ìŠµë‹ˆë‹¤.

- ì²˜ìŒ ë Œë”ë§ ë˜ì—ˆì„ ë•Œ:  
  <img src="https://user-images.githubusercontent.com/89551626/136669220-a8699d9b-8132-443b-9d49-c4ab929958f0.png" alt="first rendered" />

- ëœë¤ ìƒ‰ìƒ í´ë¦­ ë˜ì—ˆì„ ë•Œ:  
  <img src="https://user-images.githubusercontent.com/89551626/136669231-bfffdf1a-5332-46e4-b3d8-51c9f8358d26.png" alt="random color clicked" />

- +1 í´ë¦­ ë˜ì—ˆì„ ë•Œ:
  <img src="https://user-images.githubusercontent.com/89551626/136669240-465d2620-bf46-43ee-9494-0bf43bdd1590.png" alt="+1 clicked" />

ì´ëŸ°ì‹ìœ¼ë¡œ ë¼ì´í”„ì‚¬ì´í´ ë©”ì†Œë“œì™€ ì½˜ì†”ë¡œê·¸ë¥¼ í™œìš©í•˜ì—¬ ì–¸ì œ ë¼ì´í”„ì‚¬ì´í´ ë©”ì†Œë“œê°€ ì´ìš©ë˜ëŠ” ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ì´ì œëŠ” ì˜ë„ì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œ ì—ëŸ¬ë¥¼ ì¡ì•„ë‚´ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.  
`render()` ì—ì„œì˜ ì—ëŸ¬ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°ì²´ì˜ ê°’ì„ ì¡°íšŒí•˜ë ¤ê³  í•  ë•Œ ì£¼ë¡œ ë°œìƒí•©ë‹ˆë‹¤.  
ì˜ë„ì ìœ¼ë¡œ `render()` ì— ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œë³´ê² ìŠµë‹ˆë‹¤.

```javascript
render() {
  console.log("í˜¸ì¶œ - render");

  const style = {
    color: this.props.color,
  };

  return (
    <div>
      {/* â†“ ì—†ëŠ” ê°ì²´ê°’ */}
      {this.props.missing.value}
      <h1 style={style} ref={(ref) => (this.myRef = ref)}>
        {this.state.number}
      </h1>
      <p>color: {this.state.color}</p>
      <button onClick={this.handleClick}>ë”í•˜ê¸°</button>
    </div>
  );
}
```

ë¸Œë¼ìš°ì €ë¥¼ í™•ì¸í•˜ë©´ ì´ëŸ° ì—ëŸ¬ì°½ì´ ëœ¨ê²Œ ë©ë‹ˆë‹¤.  
<img src="https://user-images.githubusercontent.com/89551626/136669376-10e8b64c-d908-4e00-abb2-fa0640cd364a.png" alt="intended error" />
ì´ëŸ° ì—ëŸ¬ì°½ì´ ëœ¨ëŠ” ì´ìœ ëŠ” í˜„ì¬ ìš°ë¦¬ëŠ” ê°œë°œ ì„œë²„ë¥¼ ì‹¤í–‰ì¤‘ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.  
í•˜ì§€ë§Œ ì‚¬ìš©ìë¼ë©´ ê·¸ëƒ¥ ë¹ˆí™”ë©´ì„ ë³´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.  
ì´ëŸ´ ë•ŒëŠ” ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ê°€ ë‚¬ìŒì„ ì¸ì§€ì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ì—ëŸ¬ë¥¼ ì¡ì•„ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œì…ë‹ˆë‹¤.

```javascript
// ErrorBoundary.jsx

import React, { Component } from "react";

class ErrorBoundary extends Component {
  state = {
    error: false,
  };
  componentDidCatch(error, info) {
    this.setState({
      error: true,
    });
    console.log({ error, info });
  }
  render() {
    if (this.state.error) return <div>ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</div>;
    return this.props.children;
  }
}

export default ErrorBoundary;
```

```javascript
// App.jsx

render() {
  return (
    <div>
      <button onClick={this.handleClick}>ëœë¤ ìƒ‰ìƒ</button>
      <ErrorBoundary>
        <LifeCycleSample color={this.state.color} />
      </ErrorBoundary>
    </div>
  );
}
```

ê²½ê³ ì°½ì„ ë‹«ê²Œ ë˜ë©´ ìš°ë¦¬ê°€ ì²˜ë¦¬í•œ ëŒ€ë¡œ ì—ëŸ¬ ë°œìƒ ë¬¸êµ¬ê°€ ë³´ì´ê²Œ ë©ë‹ˆë‹¤. (ìœ ì €í•œí…Œ ë³´ì—¬ì§€ëŠ” í™”ë©´)  
<img src="https://user-images.githubusercontent.com/89551626/136669584-ef9ec3fb-4f90-4a48-8ed4-14a5acf9c6ce.png" alt="after error boundary" />

---

## 8ì¥

### 8.1 useState

`useState` ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ í›…ìœ¼ë¡œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ê°€ë³€ì ì¸ ìƒíƒœë¥¼ ì§€ë‹ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.  
í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ `state` ì™€ `setState()` ì™€ ë¹„ìŠ·í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.
`useState` ëŠ” ì´ì „ ì±•í„°ì—ì„œ ë§ì´ ë‹¤ë¤˜ìœ¼ë¯€ë¡œ ìì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.

### 8.2 useEffect

`useEffect` ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í›… ì…ë‹ˆë‹¤.  
í´ë˜ìŠ¤í˜•ì—ì„œì˜ `componentDidMount` ì™€ `componentDidUpdate` ë¥¼ í•©ì¹œ í˜•íƒœë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.  
2ì£¼ì°¨ 4ì¥ì—ì„œì˜ ì˜ˆì‹œ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ `useEffect` ë¥¼ ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useEffect, useState } from "react";

const WriteMessage = () => {
  const [inputs, setInputs] = useState({
    writer: "",
    message: "",
  });

  const { writer, message } = inputs;

  // â• useEffect ì¶”ê°€ â•
  useEffect(() => {
    console.log("ë Œë”ë§ ì™„ë£Œ");
    console.log({
      writer,
      message,
    });
  });

  const handleChange = (event) => {
    const { name, value } = event.target;
    setInputs({
      ...inputs,
      [name]: value,
    });
  };

  const handleReset = () => {
    setInputs({
      writer: "",
      message: "",
    });
  };

  return (
    <>
      <input
        type="text"
        name="writer"
        placeholder="What's your name ... ğŸ‘©"
        value={writer}
        onChange={handleChange}
      />
      <input
        type="text"
        name="message"
        placeholder="Write Something ... ğŸ“"
        value={message}
        onChange={handleChange}
      />
      <button onClick={handleReset}>ì´ˆê¸°í™”</button>
      <h1>ì‘ì„±ì:{writer}</h1>
      <h1>ë‚´ìš©: {message}</h1>
    </>
  );
};

export default WriteMessage;
```

ì½˜ì†”ì„ ì—´ì–´ë³´ë©´,,  
<img src="https://user-images.githubusercontent.com/89551626/136670178-25078cd6-b58f-47ab-aa33-99a754312b86.png" alt="useEffect() after rendered" />

ì´ë ‡ê²Œ ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ë Œë”ë§ì´ ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
í•˜ì§€ë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë  ë•Œë§Œ ì‹¤í–‰í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?
ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë¹ˆ ë°°ì—´ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  console.log("ë§ˆìš´íŠ¸ ë  ë•Œë§Œ ì‹¤í–‰");
}, []);
```

íŠ¹ì • ê°’ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ë°°ì—´ ì•ˆì— ê²€ì‚¬í•˜ê³  ì‹¶ì€ ìš”ì†Œ ê°’ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  console.log(message);
}, [message]);
```

ì´ë ‡ê²Œ ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„° ë°°ì—´ì— ì–´ë–¤ ê²ƒì„ ë„£ì–´ì£¼ëƒì— ë”°ë¼ ì‹¤í–‰ë˜ëŠ” ì¡°ê±´ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.  
ë§Œì•½ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë˜ê¸° ì „ ì´ë‚˜ ì—…ë°ì´íŠ¸ ë˜ê¸° ì§ì „ì— ì–´ë˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´  
`useEffect` ì˜ `ë’·ì •ë¦¬(cleanup) í•¨ìˆ˜` ë¥¼ ë¦¬í„´í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.  
ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
// WriteMessage.jsx ì˜ useEffect
useEffect(() => {
  console.log("effect");
  console.log(message);
  return () => {
    console.log("cleanup");
    console.log(message);
  };
}, [message]);
```

```javascript
// App.jsx
import React, { useState } from "react";
import WriteMessage from "./components/WriteMessage";

const App = () => {
  const [visible, setVisible] = useState(false);
  return (
    <div>
      <button
        onClick={() => {
          setVisible(!visible);
        }}
      >
        {visible ? "ìˆ¨ê¸°ê¸°" : "ë³´ì´ê¸°"}
      </button>
      <hr />
      {visible && <WriteMessage />}
    </div>
  );
};

export default App;
```

ë Œë”ë§ë  ë•Œë§ˆë‹¤ `cleanup í•¨ìˆ˜` ê°€ ê³„ì† ë‚˜íƒ€ë‚˜ê³  `cleanup í•¨ìˆ˜` ê°€ í˜¸ì¶œë  ë•ŒëŠ” ì—…ë°ì´íŠ¸ ì§ì „ ê°’ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.  
ì–¸ë§ˆìš´íŠ¸ ë  ë•Œë§Œ cleanup í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ë‹¤ë©´ `useEffect` ì˜ ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë¹ˆ ë°°ì—´ì„ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.

```javascript
useEffect(() => {
  console.log("effect");
  console.log(message);
  return () => {
    console.log("unmount");
  };
}, []);
```

### 8.3 useReducer

`useReducer` ëŠ” `useState` ë³´ë‹¤ ë” ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ë¦¬ë“€ì„œ(reducer) ëŠ” í˜„ì¬ ìƒíƒœ, ê·¸ë¦¬ê³  ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ì€ ì•¡ì…˜(action) ê°’ì„ ì „ë‹¬ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ë¦¬ë“€ì„œ í•¨ìˆ˜ì—ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ ë•ëŠ ë°˜ë“œì‹œ ë¶ˆë³€ì„±ì„ ì§€ì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.  
ì•„ë˜ì˜ ì˜ˆì‹œ ì½”ë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useReducer } from "react";

function reducer(state, action) {
  // action íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰
  switch (action.type) {
    case "INCREMENT":
      return { value: state.value + 1 };
    case "DECREMENT":
      return { value: state.value - 1 };
    default:
      // ì•„ë¬´ê²ƒë„ í•´ë‹¹ë˜ì§€ ì•Šì„ ë•Œ ê¸°ì¡´ ìƒíƒœ ë¦¬í„´
      return state;
  }
}

const Counter = () => {
  // useReducer ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„° = ë¦¬ë“€ì„œ í•¨ìˆ˜, ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„° = í•´ë‹¹ ë¦¬ë“€ì„œ ê¸°ë³¸ ê°’
  // ê²°ê³¼ë¡œ state ê°’ (í˜„ì¬ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœ) ê·¸ë¦¬ê³ 
  // dispatch í•¨ìˆ˜ (ì•¡ì…˜ì„ ë°œìƒì‹œí‚¤ëŠ” í•¨ìˆ˜) ë°›ì•„ì˜´
  const [state, dispatch] = useReducer(reducer, { value: 0 });
  return (
    <div>
      <p>
        í˜„ì¬ ì¹´ìš´í„° ê°’ì€ <b>{state.value}</b>
      </p>
      {/* ì´ëŸ° í˜•íƒœë¡œ í•¨ìˆ˜ì•ˆì— íŒŒë¼ë¯¸í„°ë¡œ ì•¡ì…˜ ê°’ì„ ë„£ì–´ì£¼ë©´ ë¦¬ë“€ì„œ í•¨ìˆ˜ í˜¸ì¶œë˜ëŠ” êµ¬ì¡° */}
      <button onClick={() => dispatch({ type: "INCREMENT" })}>+ 1</button>
      <button onClick={() => dispatch({ type: "DECREMENT" })}>- 1</button>
    </div>
  );
};

export default Counter;
```

(ê°ê° ì„¤ëª… ì£¼ì„ ì°¸ê³ )  
`useReducer` ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì˜ ê°€ì¥ í° ì¥ì ì€ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¹¼ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.  
ì´ë²ˆì—ëŠ” `input` ìƒíƒœë¥¼ `useReducer` ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useReducer } from "react";

function reducer(state, action) {
  return {
    ...state,
    [action.name]: action.value,
  };
}

const Info = () => {
  const [state, dispatch] = useReducer(reducer, {
    name: "",
    nickname: "",
  });

  const { name, nickname } = state;
  const onChange = (event) => {
    dispatch(event.target);
  };

  return (
    <div>
      <input name="name" value={name} onChange={onChange} />
      <input name="nickname" value={nickname} onChange={onChange} />
      <h1>ì´ë¦„: {name}</h1>
      <h1>ë‹‰ë„¤ì„: {nickname}</h1>
    </div>
  );
};

export default Info;
```

`useReducer` ì—ì„œì˜ ì•¡ì…˜ì€ ê·¸ ì–´ë–¤ ê°’ë„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.  
ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” ì´ë²¤íŠ¸ ê°ì²´ê°€ ì§€ë‹ˆê³  ìˆëŠ” `event.target` ìì²´ë¥¼ ì•¡ì…˜ ê°’ìœ¼ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
ì´ëŸ°ì‹ìœ¼ë¡œ `input` ì„ ê´€ë¦¬í•˜ë©´ ì•„ë¬´ë¦¬ ê·¸ ê°¯ìˆ˜ê°€ ë§ì•„ì ¸ë„ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 8.4 useMemo

`useMemo` ë¥¼ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì—°ì‚°ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì˜ˆì‹œ ì½”ë“œë¥¼ ë¨¼ì € ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useState } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘,,");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = (event) => {
    setNumber(event.target.value);
  };
  const onInsert = (event) => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  };

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <p>í‰ê· ê°’: {getAverage(list)}</p>
    </div>
  );
};

export default Average;
```

ì´ ê²½ìš°ì—ëŠ” ìˆ«ìë¥¼ ë“±ë¡í•  ë•Œ ë¿ë§Œ ì•„ë‹ˆë¼ `input` ë‚´ìš©ì´ ìˆ˜ì •ë  ë•Œë„ `getAverage` í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë‚´ìš©ì´ ë°”ë€” ë•ŒëŠ” ë‹¤ì‹œ ê³„ì‚°í•  í•„ìš”ê°€ ì—†ëŠ”ë° ì´ë ‡ê²Œ ê³„ì† ë Œë”ë§ì´ ë˜ëŠ” ê²ƒì€ ë‚­ë¹„ê² ì£ .  
ì´ëŸ´ ë•Œ `useMemo` ë¥¼ ì‚¬ìš©í•˜ë©´ ìµœì í™”ë¥¼ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •í•˜ê²Œ ëœë‹¤ë©´ `list` ë°°ì—´ì˜ ë‚´ìš©ì´ ë°”ë€” ë•Œë§Œ `getAverage` í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

```javascript
import React, { useMemo, useState } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘,,");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = (event) => {
    setNumber(event.target.value);
  };
  const onInsert = (event) => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  };

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <p>í‰ê· ê°’: {avg}</p>
    </div>
  );
};

export default Average;
```

### 8.5 useCallback

`useCallback` ì€ `useMemo` ì™€ ìƒë‹¹íˆ ë¹„ìŠ·í•©ë‹ˆë‹¤. ì£¼ë¡œ ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•˜ë©° ë§Œë“¤ì–´ ë†¨ë˜ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ìœ„ì—ì„œ êµ¬í˜„í•œ `Average` ì»´í¬ë„ŒíŠ¸ëŠ” ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.  
ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ìì£¼ ë°œìƒí•˜ê±°ë‚˜ ë Œë”ë§ í•´ì•¼í•  ì»´í¬ë„ŒíŠ¸ì˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ ìµœì í™”ê°€ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤.  
`useCallback` ì„ ì‚¬ìš©í•˜ì—¬ í•œ ë²ˆ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
import React, { useCallback, useMemo, useState } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘,,");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = useCallback((event) => {
    setNumber(event.target.value);
  }, []); // ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ ë  ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const onInsert = useCallback(
    (event) => {
      const nextList = list.concat(parseInt(number));
      setList(nextList);
      setNumber("");
    },
    [number, list]
  ); // number í˜¹ì€ list ê°€ ë°”ë€Œì—ˆì„ ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <p>í‰ê· ê°’: {avg}</p>
    </div>
  );
};

export default Average;
```

`useCallback` ì˜ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ìƒì„±í•˜ê³  ì‹¶ì€ í•¨ìˆ˜ë¥¼ ë„£ê³ ,  
ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ë°°ì—´ì„ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤. ì´ ë°°ì—´ì—ëŠ” ì–´ë–¤ ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì•¼ í•˜ëŠ”ì§€ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.  
`onChange` ì²˜ëŸ¼ ë¹„ì–´ìˆëŠ” ë°°ì—´ì„ ë„£ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ë§Œë“¤ì—ˆë˜ í•¨ìˆ˜ë¥¼ ê³„ì†í•´ì„œ ì¬ì‚¬ìš©í•˜ê²Œ ë˜ë©°  
`onInsert` ì²˜ëŸ¼ ë°°ì—´ì•ˆì— `number` ê³¼ `list` ë¥¼ ë„£ê²Œ ë˜ë©´ ì¸í’‹ ë‚´ìš©ì´ ë°”ë€Œê±°ë‚˜ ìƒˆë¡œìš´ í•­ëª©ì´ ì¶”ê°€ë  ë•Œ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.

í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìƒíƒœ ê°’ì— ì˜ì¡´í•´ì•¼ í•  ë•ŒëŠ” ê·¸ ê°’ì„ ë°˜ë“œì‹œ ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„° ë°°ì—´ ì•ˆì— í¬í•¨ì‹œì¼œ ì¤˜ì•¼í•©ë‹ˆë‹¤.  
`onChange` ëŠ” ê¸°ì¡´ ê°’ì„ ì¡°íšŒí•˜ì§€ ì•Šê³  ë°”ë¡œ ì…‹íŒ…ë§Œ í•˜ê¸° ë•Œë¬¸ì— ë¹„ì–´ìˆì–´ë„ ìƒê´€ì—†ì§€ë§Œ  
`onInsert` ëŠ” ê¸°ì¡´ì˜ `number` ê³¼ `list` ë¥¼ ì¡°íšŒí•´ì„œ `nextList` ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë°°ì—´ì— ì´ ë‘ ìš”ì†Œê°€ ê¼­ í•„ìš”í•©ë‹ˆë‹¤.

### 8.6 useRef

`useRef` ëŠ” 2ì£¼ì°¨ 5ì¥ `ref` ì±•í„°ì—ì„œ ë‹¤ë¤˜ìœ¼ë¯€ë¡œ ìì„¸í•œ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.

### 8.7 ì»¤ìŠ¤í…€ Hooks ë§Œë“¤ê¸°

ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ê³µìœ í•  ê²½ìš° ìì‹ ë§Œì˜ í›…ì„ ë§Œë“¤ì–´ ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
`useReducer` ì—ì„œ ì¼ë˜ ë¡œì§ì„ `useInputs` ë¼ëŠ” í›…ìœ¼ë¡œ ë”°ë¡œ ë¶„ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
// useInputs.jsx

import { useReducer } from "react";

function reducer(state, action) {
  return {
    ...state,
    [action.name]: action.value,
  };
}

export default function useInputs(initialForm) {
  const [state, dispatch] = useReducer(reducer, initialForm);
  const onChange = (event) => {
    dispatch(event.target);
  };
  return [state, onChange];
}
```

```javascript
// Info.jsx

import useInputs from "./useInputs";

const Info = () => {
  const [state, onChange] = useInputs({
    name: "",
    nickname: "",
  });
  const { name, nickname } = state;
  return (
    <div>
      <input name="name" value={name} onChange={onChange} />
      <input name="nickname" value={nickname} onChange={onChange} />
      <h1>ì´ë¦„: {name}</h1>
      <h1>ë‹‰ë„¤ì„: {nickname}</h1>
    </div>
  );
};
export default Info;
```

### 8.8 ë‹¤ë¥¸ Hooks

ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ë§Œë“  í›…ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì°¸ê³ ë§í¬ëŠ” ì•„ë˜ì— ìˆìŠµë‹ˆë‹¤.
[ë§í¬ 1](https://nikgraf.github.io/react-hooks) [ë§í¬ 2](https://github.com/rehooks/awesome-react-hooks)
